if (self.CavalryLogger) { CavalryLogger.start_js(["5zZdPO1"]); }

__d("TimelineAppSectionConstants",[],(function(a,b,c,d,e,f){e.exports={collectionTabKeyToAppTabKey:{friends_recent:"friends",friends_all:"friends",friends_mutual:"friends",photos_of:"photos",photos_all:"photos",photos_albums:"photos",info_all:"about",music_favs:"music",books_read:"books",books_favorite:"books",friends_followers:"friends",friends_following:"friends",notes_my_notes:"notes",notes_drafts:"notes",notes_about_me:"notes",notes_shared_notes:"notes",notes_mentions_me:"notes",video_movies_watch:"movies",video_tv_shows_watch:"tv",video_movies_favorite:"movies",video_tv_shows_favorite:"tv",friends_high_school:"friends",friends_college:"friends",friends_work:"friends",apps_like:"games",upcoming_events:"events",past_events:"events",likes_people:"likes",groups_member:"groups",photos_album:"photos",likes_restaurants:"likes",saved_books:"saved",saved_movies:"saved",saved_tv_shows:"saved",saved_music:"saved",saved_links:"saved",sports_teams:"sports",likes_all:"likes",saved_places:"saved",saved_all:"saved",sports_athletes:"sports",saved_events:"saved",saved_archived:"saved",places_recent:"map",places_visited:"map",reviews_written:"reviews_given",likes_section_movies:"likes",likes_section_tv_shows:"likes",likes_section_books:"likes",likes_section_music:"likes",likes_section_sports_teams:"likes",places_cities:"map",place_visits_by_city:null,likes_section_apps_and_games:"likes",likes_section_sports_athletes:"likes",saved_videos:"saved",saved_pages:"saved",friends_with_upcoming_birthdays:"friends",friends_current_city:"friends",friends_hometown:"friends",at_work_contact:null,place_reviews_written:"reviews_given",movie_reviews_written:"reviews_given",tv_show_reviews_written:"reviews_given",book_reviews_written:"reviews_given",videos_by_user:"videos",videos_user_tagged:"videos",saved_posts:"saved",saved_photo_posts:"saved",saved_products:"saved",at_work_hr_info:null,groups_admined:"groups",groups_mutual:"groups",saved_profiles:"saved",work_followers:"friends",work_following:"friends",saved_messages:"saved",saved_lists:"saved",saved_fundraisers:"saved",saved_jobs:"saved",lists:"lists",list_contents:"lists",saved_group_posts:"saved",saved_offers:"saved",fun_fact_answers:"did_you_know",fun_fact_asked:"did_you_know",saved_asset3ds:"saved",saved_marketplace_nearbuy_deals:"saved",stories_archive:"archive",work_bookmarked_coworkers:"friends",profile_songs:"music",about_overview:"about",about_work_and_education:"about",about_places:"about",about_contact_and_basic_info:"about",about_family_and_relationships:"about",about_details:"about",about_life_events:"about",about_profile_transparency:"about",followers_mutual:"friends",following_mutual:"friends",past_hosted_events:"events",upcoming_hosted_events:"events",workplace_about_details:"about",commerce:"shop_tab",shop:"shop_tab",workplace_rp4smb_about_details:"about",work_platform_about_details:"about",services:"services",fundraisers:"fundraisers",jobs:"jobs",reviews:"reviews",saved_reels:"saved",unknown_do_not_use_this:null,followers:"friends",following:"friends",media_set:"photos",photos_stream:"photos",videos_by:"videos",videos_of:"videos"},alternateCollectionTabKeyToAppTabKey:{following:"following",followers:"followers"}}}),null);
__d("ProfileTimelineUITypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:ProfileTimelineUILoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:ProfileTimelineUILoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:ProfileTimelineUILoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventMetadata=function(a){this.$1.event_metadata=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setProfileID=function(a){this.$1.profile_id=a;return this};c.setRelationshipType=function(a){this.$1.relationship_type=a;return this};c.setUIComponent=function(a){this.$1.ui_component=a;return this};return a}();c={event:!0,event_metadata:!0,profile_id:!0,relationship_type:!0,ui_component:!0};e.exports=a}),null);
__d("BloodDonorSettings",["DOM","DOMScroll","Run","URI","emptyFunction"],(function(a,b,c,d,e,f){f.scrollToSetting=a;f._scrollAndFocus=c;var g;function a(a,c){var d=this;(g||(g=b("URI"))).getRequestURI().getQueryData().focus_blood_donor_settings&&b("Run").onLoad(function(){d._scrollAndFocus(a,c)})}function c(a,c){c=c?b("emptyFunction"):function(){var c=b("DOM").scry(a,"blood_type")[0];c&&c.focus()};b("DOMScroll").scrollTo(a,500,!1,0,0,c)}}),null);
__d("findTag",["$","fb-error-lite"],(function(a,b,c,d,e,f){var g=b("fb-error-lite").err,h=b("fb-error-lite").TAALOpcode;a=function(a,c){var d=b("$")(a);if(!c){if(d instanceof HTMLElement)return d;var e=g('Element with ID "%s" is not an HTMLElement',a);e.taalOpcodes=[h.PREVIOUS_FILE];throw e}e=d.tagName.toLowerCase();if(e!==c){a=g('Expected $("%s") to be of type "%s" but got "%s" instead.',a,c,e);a.taalOpcodes=a.taalOpcodes||[];a.taalOpcodes=[h.PREVIOUS_FILE];throw a}return d};c=a;e.exports=c}),null);
__d("setLocaleRegion",["findTag"],(function(a,b,c,d,e,f){e.exports=a;function a(a){var c=b("findTag")("intl-region-container");c.style.height=c.offsetHeight+"px";c.className="selected-intl-region"+a;c=b("findTag")("intl-region-link-container");c.className="selected-intl-region-link"+a}}),null);
__d("legacy:locale-selector",["setLocaleRegion"],(function(a,b,c,d,e,f){a.setLocaleRegion=b("setLocaleRegion")}),3);
__d("TidyArbiter",["TidyArbiterMixin"],(function(a,b,c,d,e,f){a=babelHelpers["extends"]({},b("TidyArbiterMixin"));c=a;e.exports=c}),null);
__d("TimelineComponentKeys",[],(function(a,b,c,d,e,f){a="content";f.CONTENT=a;b="escape_hatch";f.ESCAPE_HATCH=b;c="overview_container";f.OVERVIEW_CONTAINER=c;d="nav";f.NAV=d;e="scrubber";f.SCRUBBER=e;a="sticky_header";f.STICKY_HEADER=a;b="sticky_header_nav";f.STICKY_HEADER_NAV=b;c="sticky_header_view_switcher";f.STICKY_HEADER_VIEW_SWITCHER=c}),null);
__d("TimelineConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({DS_LOADED:"timeline-capsule-loaded",DS_COLUMN_HEIGHT_DIFFERENTIAL:"timeline-column-diff-height",SCROLL_TO_OFFSET:100,SCRUBBER_DEFAULT_OFFSET:38,SECTION_EXPAND:"TimelineConstants/sectionExpand",SECTION_LOADING:"TimelineConstants/sectionLoading",SECTION_FULLY_LOADED:"TimelineConstants/sectionFullyLoaded",SECTION_REGISTERED:"TimelineConstants/sectionRegistered",UNIT_SEGMENT_LOADED:"TimelineConstants/unitSegmentLoaded"});e.exports=a}),null);
__d("TimelineController",["Arbiter","BlueBar","CSS","DataStore","Event","ProfileTabConst","ProfileTabUtils","Run","TidyArbiter","TimelineComponentKeys","TimelineConstants","UITinyViewportAction","URI","Vector","findTag","forEachObject","ge","queryThenMutateDOM","tidyEvent"],(function(a,b,c,d,e,f){f.init=a;f.showAboveHeaderContent=J;f.registerCurrentKey=K;f.getProfileID=c;f.getRelationshipType=d;f.getSessionToken=e;f.getCurrentKey=L;f.getCurrentScrubber=M;f.getCurrentStickyHeaderNav=N;f.scrubberHasLoaded=O;f.sectionHasChanged=P;f.navigateToSection=Q;f.adjustStickyHeaderWidth=R;f.dismissStickyHeaderConfirmationBar=S;f.hideStickyHeaderNavSectionMenu=T;f.register=U;var g,h=740,i="top",j="paddingTop",k="paddingTop",l=null,m=!1,n=null,o=null,p={},q={},r=null,s=[],t=null,u=null;b("Vector").getViewportDimensions();var v=!1,w=!1,x=!1;function y(a,b,c){c===void 0&&(c=[]);if(p[a])return p[a][b].apply(p[a],c);q[a]=q[a]||{};q[a][b]=c;return!1}function z(){v&&(v=D(b("ge")("rightCol"),k,M()));if(w){var a=b("ge")("pagelet_above_header_timeline");a&&(w=D(a,i))}x&&(x=D(b("BlueBar").getBar(),j))}function A(){u=b("Vector").getScrollPosition()}function B(){z(),u&&b("ProfileTabUtils").tabHasStickyHeader(l)&&y(b("TimelineComponentKeys").STICKY_HEADER,"check",[u.y]),y(b("TimelineComponentKeys").CONTENT,"checkCurrentSectionChange")}function C(){b("queryThenMutateDOM")(A,B,"TimelineController/scrollListener")}function D(a,c,d){if(!a||!u)return!1;if(u.y<=0){E(a,c);return!1}if(d&&b("CSS").hasClass(d.getRoot(),"fixed_elem")){E(a,c);return!1}d=parseInt(a.style[c],10)||0;u.y<d?(b("CSS").addClass(a,"timeline_fixed"),a.style[c]=u.y+"px"):b("CSS").removeClass(a,"timeline_fixed");return!0}function E(a,c){a.style[c]="0px",b("CSS").removeClass(a,"timeline_fixed")}function F(){b("Vector").getViewportDimensions()}function G(){b("queryThenMutateDOM")(F,function(){y(b("TimelineComponentKeys").STICKY_HEADER_NAV,"adjustMenuHeights"),u&&y(b("TimelineComponentKeys").STICKY_HEADER,"check",[u.y])},"TimelineController/resize")}function H(a,c){a=b("Vector").getScrollPosition();c=Math.min(c,a.y);a=b("ge")("rightCol");a&&(a.style[k]=c+"px",v=!0);J(c);x=b("UITinyViewportAction").isTinyHeight();if(x){a=b("BlueBar").getBar();a&&(a.style[j]=c+"px")}b("Arbiter").inform("reflow")}function I(){while(s.length)s.pop().remove();b("forEachObject")(p,function(a,b){a.reset&&a.reset()});l=null;n=null;p={};q={};t=null;m=!1;w=!1;if(v){var a=b("ge")("rightCol");a&&E(a,k)}v=!1;if(x){a=b("BlueBar").getBar();a&&E(a,j);x=!1}b("DataStore").purge(b("TimelineConstants").DS_LOADED)}function a(a,c,d){if(m)return;b("ProfileTabUtils").isTimelineTab(c)&&(c=b("ProfileTabConst").TIMELINE);m=!0;n=a;o=d.relationship_type;r=d.session_token;s.push(b("Event").listen(window,"scroll",C),b("Event").listen(window,"resize",G));b("tidyEvent")(b("TidyArbiter").subscribe("TimelineCover/coverCollapsed",H));b("Run").onLeave(I);a=new(g||(g=b("URI")))(window.location).getQueryData();K(c,a.subkey)}function J(a){var c=b("Vector").getScrollPosition();a=Math.min(a,c.y);c=b("findTag")("pagelet_above_header_timeline");if(c.firstChild){var d=b("findTag")("above_header_timeline_placeholder");d.style.height=c.offsetHeight+"px";c.style.top=a+"px";w=!0}}function K(a,c){l=a;t=a!==b("ProfileTabConst").MAP&&b("Vector").getViewportDimensions().y<h&&b("ProfileTabUtils").tabHasScrubber(a);if(!t){var d=b("BlueBar").getBar();t=d&&d.offsetTop}b("Arbiter").inform("TimelineController/sectionKeyChange",[a,c],"state");y(b("TimelineComponentKeys").STICKY_HEADER,"handleTabChange",[a,c]);y(b("TimelineComponentKeys").STICKY_HEADER_NAV,"handleTabChange",[a,c]);y(b("TimelineComponentKeys").OVERVIEW_CONTAINER,"handleTabChange",[a,c]);y(b("TimelineComponentKeys").STICKY_HEADER_VIEW_SWITCHER,"handleTabChange",[a,c]);C()}function c(){return n}function d(){return o}function e(){return r}function L(){return l}function M(){return p[b("TimelineComponentKeys").SCRUBBER]}function N(){return p[b("TimelineComponentKeys").STICKY_HEADER_NAV]}function O(a){b("CSS").conditionClass(a.getRoot(),"fixed_elem",!t)}function P(a,c){a=[a,c];y(b("TimelineComponentKeys").STICKY_HEADER_NAV,"updateSection",a);y(b("TimelineComponentKeys").SCRUBBER,"updateSection",a)}function Q(a){y(b("TimelineComponentKeys").CONTENT,"navigateToSection",[a])}function R(){y(b("TimelineComponentKeys").STICKY_HEADER,"adjustWidth")}function S(){y(b("TimelineComponentKeys").STICKY_HEADER,"dismissConfirmationBar")}function T(){y(b("TimelineComponentKeys").STICKY_HEADER_NAV,"hideSectionMenu")}function U(a,c){p[a]=c,q[a]&&(b("forEachObject")(q[a],function(b,c){y(a,c,b)}),delete q[a])}}),null);
__d("ProfileTimelineUILogger",["Banzai","ProfileTimelineUITypedLogger","TimelineController"],(function(a,b,c,d,e,f){f.logCoverNavItemClick=a;f.logCoverNavMoreItemClick=c;f.logScrubberClick=d;f.logStickyHeaderImpression=e;f.logStickyHeaderNavItemClick=i;f.logStickyHeaderScrubberClick=j;f.logStickyHeaderNavItemWithJumperClick=k;f.logStickyHeaderScrubberWithJumperClick=l;f.logJumperRecentStoriesButtonClick=m;f.logJumperMoreStoriesSpinnerView=n;f.logTabLoadSuccess=o;var g="profile_timeline_ui";function h(a,c,d){var e=b("TimelineController").getProfileID(),f=b("TimelineController").getRelationshipType();b("Banzai").isEnabled(g)&&e!=null&&f!=null&&new(b("ProfileTimelineUITypedLogger"))().setEvent(a).setUIComponent(c).setProfileID(e).setRelationshipType(f).setEventMetadata(d).log()}function a(a){h("click","cover_nav_item",{tab_key:a})}function c(a){h("click","cover_nav_more_item",{tab_key:a})}function d(a){h("click","scrubber",{section_key:a})}function e(){h("view","sticky_header",{})}function i(a){h("click","sticky_header_nav_item",{tab_key:a})}function j(a){h("click","sticky_header_scrubber",{section_key:a})}function k(a){h("click","sticky_header_nav_item_with_jumper",{tab_key:a})}function l(a){h("click","sticky_header_scrubber_with_jumper",{section_key:a})}function m(a){h("click","jumper_recent_stories_button",{cursor:a})}function n(a){h("view","jumper_more_stories_spinner",{cursor:a})}function o(a){h("load","tab",a!=null?{tab_key:a}:{})}}),null);
__d("TimelineURI",["BizSiteIdentifier.brands","BusinessURI.brands","ProfileTabConst","TimelineAppSectionConstants","URI","goURI"],(function(a,b,c,d,e,f){f.parseURI=a;f.goToProfileID=c;f.getTabKeyFromURI=h;f.getSectionKeyFromURI=i;f.getVanityFromURI=d;f.isVideoPermalink=e;var g;function a(a){a=new(g||(g=b("URI")))(a);var c=a.getQueryData();a=a.getPath();var d=a.split("/").slice(1);(d[0]==="people"||d[0]==="pages")&&(d=d.slice(2));var e=c.sk||d[1]||b("ProfileTabConst").TIMELINE;e===b("ProfileTabConst").WALL&&(e=b("ProfileTabConst").TIMELINE);var f=null,h=null;e===b("ProfileTabConst").TIMELINE&&(h=parseInt(d[2],10)||null,f=parseInt(d[3],10)||null);return{path:a,id:c.id||d[0],key:e,viewas:c.viewas?c.viewas:"0",filter:c.filter?c.filter:null,year:h,month:f,friendship:!!c.and}}function c(a){b("BizSiteIdentifier.brands").isBizSite()?b("goURI")(b("BusinessURI.brands")("/profile.php").addQueryData("id",a),!0):b("goURI")(new(g||(g=b("URI")))("/"+a),!0)}function h(a){a=i(a);return b("TimelineAppSectionConstants").collectionTabKeyToAppTabKey[a]||a}function i(a){return a.getQueryData().sk||a.getPath().split("/")[2]||b("ProfileTabConst").TIMELINE}function d(a){var b=a.getQueryData().id;return b||a.getPath().split("/")[1]}function e(a){return h(a)===b("ProfileTabConst").VIDEOS&&a.getPath().split("/").filter(function(a){return!!a}).length>2}}),null);
__d("ProfileNavigation",["$","Arbiter","CSS","DOMScroll","PageTransitions","ProfileTabConst","ProfileTabUtils","ProfileTimelineUILogger","ScriptPath","TimelineController","TimelineURI","UIPagelet","URI","ge"],(function(a,b,c,d,e,f){f.init=a;f.reset=c;f.getScriptPath=v;var g,h=7,i=null,j=null;function k(a){a=l(a);a||b("Arbiter").inform("profile/onLeave");return a}function l(a){var c=(g||(g=b("URI"))).getMostRecentURI(),d=b("TimelineURI").getSectionKeyFromURI(c),e=b("TimelineURI").getTabKeyFromURI(c),f=c.getQueryData();f=f.subkey;var h=b("TimelineURI").getSectionKeyFromURI(a),j=b("TimelineURI").getTabKeyFromURI(a),k=a.getQueryData(),l=k.subkey;if(s(c,a)||t(j)||t(e)||!!k.and||b("TimelineURI").isVideoPermalink(a))return!1;if(k.hc_location==="profile_browser")return!1;if(Object.prototype.hasOwnProperty.call(k,"theater")){b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",u);return!1}if(Object.prototype.hasOwnProperty.call(k,"force-refresh"))return!1;if(b("ProfileTabUtils").normalizeTabKey(e)===b("ProfileTabUtils").normalizeTabKey(j)&&b("ProfileTabUtils").normalizeTabKey(d)===b("ProfileTabUtils").normalizeTabKey(h)&&f===l)return!1;if(b("ProfileTabUtils").isTimelineOverviewTab(e)&&b("ProfileTabUtils").isTimelineOverviewTab(j)&&f!==l){b("TimelineController").registerCurrentKey(j,l);b("PageTransitions").transitionComplete();return!0}c=b("ProfileTabUtils").getPageletForTabKey(j);if(c!==null&&!b("ProfileTabUtils").isMedleyTab(e)&&b("ProfileTabUtils").isMedleyTab(j)&&r(h)){i=h;m(h,c,b("ProfileTabUtils").getIDForTabKey(e),b("ProfileTabUtils").getIDForTabKey(j),k);return!0}if(c!==null&&!b("ProfileTabUtils").isMedleyTab(j)){b("ProfileTabUtils").isMedleyTab(e)&&(i=d);m(b("ProfileTabUtils").normalizeTabKey(j),c,b("ProfileTabUtils").getIDForTabKey(e),b("ProfileTabUtils").getIDForTabKey(j),k);return!0}return!1}function m(a,c,d,e,f){var g=b("ge")("fbTimelineHeadline");g&&!b("DOMScroll").isCurrentlyVisible(g)&&window.scrollTo(0,0);b("CSS").hide(b("$")(d));b("Arbiter").inform("save_facebar_query",!0);g=b("ge")(e);g?(b("CSS").show(g),q(a)):n(c,a,f);d=b("ge")("pageFooter");d&&b("CSS").conditionShow(d,!b("ProfileTabUtils").isTimelineTab(a));e=f&&f.subkey?String(f.subkey):null;b("TimelineController").registerCurrentKey(a,e)}function n(a,c,d){o();var e=babelHelpers["extends"]({},j,{tab_key:c});d&&(e=babelHelpers["extends"]({},e,d));d=function(a){p(),a()};d={append:!0,displayCallback:d,finallyHandler:q.bind(null,c),usePipe:!0};b("UIPagelet").loadFromEndpoint(a,"pagelet_main_column_personal",e,d)}function o(){b("CSS").show(b("$")("tab_load_indicator"))}function p(){b("CSS").hide(b("$")("tab_load_indicator"))}function q(a){b("ScriptPath").set(v(a),null,{entity_id:b("TimelineController").getProfileID(),profile_session_id:b("TimelineController").getSessionToken()}),b("PageTransitions").transitionComplete(),b("ProfileTimelineUILogger").logTabLoadSuccess(a)}function r(a){return i===null||a===i}function s(a,c){var d=b("TimelineURI").getVanityFromURI(a);a=a.getQueryData().id;var e=b("TimelineURI").getVanityFromURI(c);c=c.getQueryData().id;if(d&&e)return d!==e;return a&&c?a!==c:!0}function t(a){return b("ProfileTabUtils").isActivityLogTab(a)||a===b("ProfileTabConst").MEMORIAL_CONTACT||a===b("ProfileTabConst").POSTS||a===b("ProfileTabConst").TRIBUTES}function u(){b("PageTransitions").registerHandler(k,h)}function a(a){j=a.profileContextData,u()}function c(){j=null,i=null,b("PageTransitions").removeHandler(k)}function v(a){var c="WebTimelineController";a&&!b("ProfileTabUtils").isTimelineTab(a)&&(c+=":"+a);return c}}),null);
__d("TimelineDrag",["ArbiterMixin","Event","Locale","Style","Vector","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this)||this;d=d||{};e._listenOn=d.listenOn;e._offsetInput=c;e._defaultOffset=d.default_offset;e._killClicks=d.killClicks;e._vertical=!0;e._RTLXSwitch=!1;e.setPicture(b,d);return e}var d=c.prototype;d.setPicture=function(a,c){if(!a)return!1;c=c||{};this._picture=a;this._defaultOffset=c.default_offset;c.offsetInput&&(this._offsetInput=c.offsetInput);c.vertical!==void 0&&(this._vertical=c.vertical);c.height&&(this._containerHeight=c.height);c.width&&(this._containerWidth=c.width);this._vertical?(this._offsetType="top",this._eventCoord="y"):(this._RTLXSwitch=b("Locale").isRTL(),this._offsetType="left",this._eventCoord="x");this._picture.complete?this._initialLoad():this._loadListener=b("Event").listen(this._picture,"load",function(){this._loadListener.remove(),this._loadListener=null,this._initialLoad()}.bind(this))};d.destroy=function(){this._stopDrag(),this._saveOffset(),this._mousedown&&this._mousedown.remove(),this._mousedown=null,this._touch&&this._touch.remove(),this._touch=null,this._onclick&&this._onclick.remove(),this._onclick=null,this._loadListener&&this._loadListener.remove(),this._loadListener=null};d._initialLoad=function(){var a=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=b("Event").listen(a,"mousedown",this._onMouseDown.bind(this));this._touch&&this._touch.remove();this._touch=b("Event").listen(a,"touchstart",this._onTouchStart.bind(this));this._vertical?this._maxOffset=this._containerHeight-this._picture.offsetHeight:this._maxOffset=this._containerWidth-this._picture.offsetWidth;this._defaultOffset!==void 0&&this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();this._onclick=null;this._killClicks&&(this._onclick=b("Event").listen(a,"click",this._onClick.bind(this)));this._saveOffset()};d._onClick=function(a){a.kill()};d._onDragStart=function(a,c){var d=parseInt(b("Style").get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=d-c[this._eventCoord];this._startDrag();a.kill()};d._onMouseDown=function(a){this._onDragStart(a,b("Vector").getEventPosition(a))};d._onTouchStart=function(a){this._onDragStart(a,b("Vector").getTouchEventPosition(a))};d._startDrag=function(){if(!this._dragStarted){var a;this.inform("startdrag",this);this._dragTokens=[(a=b("Event")).listen(document.documentElement,"mouseup",this._onDragEnd.bind(this)),a.listen(document.documentElement,"touchend",this._onDragEnd.bind(this)),a.listen(document.documentElement,"mousemove",this._onMouseMove.bind(this)),a.listen(document.documentElement,"touchmove",this._onTouchMove.bind(this))];this._dragStarted=!0}};d._saveOffset=function(){var a=parseInt(b("Style").get(this._picture,this._offsetType),10);this._RTLXSwitch?this._offsetInput.value=a+this._containerWidth-this._picture.offsetWidth:this._offsetInput.value=a};d._stopDrag=function(){this._dragStarted&&(this.inform("stopdrag",this),this._dragStarted=!1,this._dragTokens.forEach(function(a){a.remove()}),this._saveOffset())};d._onDragEnd=function(a){this._stopDrag(),a.kill()};d._setOffset=function(a){this._RTLXSwitch?a=Math.max(0,Math.min(a,-this._maxOffset)):a=Math.min(0,Math.max(a,this._maxOffset)),b("Style").set(this._picture,this._offsetType,a+"px")};d._onHandleMove=function(a,b){this._setOffset(this._pictureStartDragOffset+b[this._eventCoord]),a.kill()};d._onMouseMove=function(a){this._onHandleMove(a,b("Vector").getEventPosition(a))};d._onTouchMove=function(a){this._onHandleMove(a,b("Vector").getTouchEventPosition(a))};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("TimelineCover",["csx","cx","fbt","Arbiter","Button","CSS","CurrentUser","DOM","DOMScroll","Dialog","FileInputUploader","Focus","HTML","PageTransitions","Parent","ReloadPage","Run","Style","TimelineDrag","WebFunnelLogger","ge","setImmediate","tidyEvent"],(function(a,b,c,d,e,f,g,h,i){a=function(){function a(c,d,e){var f=this;this.root=b("Parent").bySelector(c,"#fbProfileCover");typeof d==="object"?(this._coverHeight=d.cover_height,this._coverWidth=d.cover_width,this.previewing=d.previewing,this._isLegacy=!1):(this._isLegacy=!0,this._coverHeight=d,this.previewing=e);this._parentSection=b("Parent").byClass(this.root,"fbTimelineSection");this.cover=b("DOM").find(this.root,".cover");a.instance=this;this.editing=!1;b("Run").onBeforeUnload(this.onBeforeUnload.bind(this));this._parentSection||(this._parentSection=b("Parent").byClass(this.root,"fbEventHeader"));this.previewing&&b("setImmediate")(function(){f.editMode(),f.updateCoverImage(f.previewing)})}var c=a.prototype;c.showLoadingIndicator=function(){var a=b("ge")("fbCoverImageContainer");a&&b("CSS").addClass(a,"opaquedLoading")};c.hideLoadingIndicator=function(){var a=b("ge")("fbCoverImageContainer");a&&b("CSS").removeClass(a,"opaquedLoading")};c.onBeforeUnload=function(){if(this.isInEditMode())return i._("Si vous quittez cette Page, votre photo de couverture ne sera pas enregistr\u00e9e. Pour l\u2019enregistrer, appuyez sur le bouton Enregistrer sous votre photo de couverture.")};c.isCoverImageVerticalFlow=function(a){return a===null||a===void 0?!0:!a.style.height};c.editMode=function(){var a=b("DOM").find(this.root,"button.saveButton");b("Button").setEnabled(b("DOM").find(this.root,"button.cancelButton"),!0);b("Button").setEnabled(a,!0);this.hideLoadingIndicator();this._coverImage=b("DOM").scry(this.root,".coverImage")[0];if(this._coverImage){var c=b("DOM").scry(this._coverImage,".coverWrap")[0];if(c){c=b("DOM").scry(c,".coverPhotoImg")[0];this._originalIsVertical=this.isCoverImageVerticalFlow(c);this._originalOffset=b("Style").get(c,this._originalIsVertical?"top":"left")}}this._parentSection!==null&&b("CSS").addClass(this._parentSection,"fbEditCover");b("DOMScroll").scrollTo(this.root);this.previewing&&(b("DOM").remove(this._coverImage),b("CSS").show(this._coverImage));if(this._coverImage){c=b("DOM").scry(this._coverImage,".coverPhotoImg")[0];c&&this._createDragger()}this.editing=!0;b("Focus").set(a);b("Arbiter").inform("CoverPhotoEdit",{sender:this,state:"open"});new(b("WebFunnelLogger"))("ProfileBlueTimelineWebFunnelDefinition").setAction("[impression][cover photo][reposition]").setSessionKey(b("CurrentUser").getID()).log()};c._exitEditMode=function(){this._timelineDrag&&(this._timelineDrag.destroy(),this._timelineDrag=null),b("DOM").find(this.root,"input.hiddenPhotoID").value=null,b("Button").setEnabled(b("DOM").find(this.root,"button.cancelButton"),!1),b("Button").setEnabled(b("DOM").find(this.root,"button.saveButton"),!1),this._parentSection!==null&&b("CSS").removeClass(this._parentSection,"fbEditCover"),this.hideLoadingIndicator(),this.previewing=!1,b("Arbiter").inform("CoverPhotoEdit",{sender:this,state:"closed"}),this.editing=!1};c._createDragger=function(a){var c,d;this._isLegacy?(c=b("DOM").find(this.root,"input.photoOffsetInput"),this._originalIsVertical=!0):(d=a===void 0?this._originalIsVertical:a,c=d?b("DOM").find(this.root,"input.photoOffsetYInput"):b("DOM").find(this.root,"input.photoOffsetXInput"));this._timelineDrag=new(b("TimelineDrag"))(b("DOM").scry(this.root,".coverImage .coverPhotoImg")[0],c,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:d,killClicks:!0})};c.updateCoverImage=function(a,c){this._reloadAfterNextUpdate=!0;c&&this.editMode();b("DOM").find(this.root,"input.hiddenPhotoID").value=a;b("Button").setEnabled(b("DOM").find(this.root,"button.saveButton"),!0);c&&b("DOM").replace(b("DOM").scry(this.root,".coverImage")[0],typeof c==="string"?b("HTML")(c):c);a=b("DOM").scry(b("DOM").find(this.root,".coverImage"),".coverPhotoImg")[0];c=this.isCoverImageVerticalFlow(a);var d;this._isLegacy?d=b("DOM").find(this.root,"input.photoOffsetInput"):d=c?b("DOM").find(this.root,"input.photoOffsetYInput"):b("DOM").find(this.root,"input.photoOffsetXInput");this._timelineDrag?this._timelineDrag.setPicture(a,{offsetInput:d,vertical:c}):this._createDragger(c);this._updateHeader()};c.saveUpdate=function(){window.onbeforeunload=null;var a=b("ge")("fbCoverImageContainer");b("CSS").addClass(a,"opaquedLoading");this._timelineDrag&&(this._timelineDrag.destroy(),this._timelineDrag=null)};c.cancelUpdate=function(){this._reloadAfterNextUpdate=!1,b("DOM").remove(b("DOM").scry(this.root,".coverImage")[0]),b("DOM").prependContent(this.cover,this._coverImage),this._originalOffset!==void 0&&b("Style").set(b("DOM").scry(this._coverImage,".coverPhotoImg")[0],this._originalIsVertical?"top":"left",this._originalOffset),this._exitEditMode(),this._updateHeader(),new(b("WebFunnelLogger"))("ProfileBlueTimelineWebFunnelDefinition").setAction("[action][cover photo][reposition cancel]").setSessionKey(b("CurrentUser").getID()).log()};a.staticSaveComplete=function(){var b=a.getInstance();b!==null&&b.saveComplete()};c.saveComplete=function(){this._coverImage=b("DOM").scry(this.root,".coverImage")[0];var a=b("DOM").scry(this.root,"._3x7_")[0];a&&b("CSS").removeClass(a,"_3x7_");this._exitEditMode();this._updateHeader();b("PageTransitions").rewriteCurrentURI(b("PageTransitions").getCurrentURI().getUnqualifiedURI(),b("PageTransitions").getCurrentURI().removeQueryData("preview_cover"));this._reloadAfterNextUpdate&&b("ReloadPage").now()};c.isInEditMode=function(){return this.editing};c._updateHeader=function(){var a=b("DOM").scry(this.root,".coverImage")[0];if(!a)return;a=b("CSS").hasClass(a,"coverNoImage");var c=null;this._parentSection!==null&&(c=b("CSS").hasClass(this._parentSection,"noCoverImage"));a!==c&&(this._parentSection!==null&&b("CSS").conditionClass(this._parentSection,"noCoverImage",a))};a.getInstance=function(){return a.instance};a.staticUpdateCoverImage=function(b){var c=a.getInstance();c!==null&&c.updateCoverImage(null,b)};c.setupFileUpload=function(c,d,e){var f=this;c.subscribe("change",function(){var g=new(b("FileInputUploader"))(c.getInput()).setURI(d).setAllowCrossOrigin(!0);g.subscribe("failure",function(){a.showErrorDialog(i._("Cover Upload Failed"),i._("Uploading the new cover picture failed. Please try again."))});g.subscribe(["success","failure"],function(){f.hideLoadingIndicator(),c.clear(),b("CSS").removeClass(c.getControl(),e),c.getInput().disabled=!1});f.showLoadingIndicator();f._reloadAfterNextUpdate=!0;g.send();b("CSS").addClass(c.getControl(),e);c.getInput().disabled=!0})};a.setupFileUpload=function(b,c,d){var e=a.getInstance();e!==null&&e.setupFileUpload(b,c,d)};a.imageUploadDone=function(c,d){var e=a.getInstance();e!==null&&(e.updateCoverImage(c,d),new(b("WebFunnelLogger"))("ProfileBlueTimelineWebFunnelDefinition").setAction("[action][cover photo][upload success]").setSessionKey(b("CurrentUser").getID()).log())};a.showErrorDialog=function(c,d){new(b("Dialog"))().setTitle(c).setButtons(b("Dialog").OK).setBody(d).setSemiModal(!0).show();c=a.getInstance();c!==null&&c.hideLoadingIndicator()};a.initFileUploadMenu=function(b){a.showLoadingAfterFileUpload(b.getForm())};a.showLoadingAfterFileUpload=function(c){b("tidyEvent")(c.subscribe("submit",function(){var b=a.getInstance();b!==null&&b.showLoadingIndicator()}))};return a}();e.exports=a;a.instance=null}),null);
__d("TimelinePlacesSection",["TimelineAppSection","TimelinePlacesCollection"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){return a.call(this,b,c,d,e)||this}var d=c.prototype;d.hideCollection=function(c){a.prototype.hideCollection.call(this,c),c instanceof b("TimelinePlacesCollection")&&c.hide()};d.showCollection=function(c){a.prototype.showCollection.call(this,c),c instanceof b("TimelinePlacesCollection")&&c.show()};return c}(b("TimelineAppSection"));e.exports=a}),null);
__d("TimelineMedley",["csx","cx","$","Arbiter","CSS","DOM","DOMQuery","MedleyPageletRequestData","PageTransitions","ProfileNavigation","ProfileOverviewSection","ProfileTabUtils","ScriptPath","TimelineAppSection","TimelineController","TimelineMonitor","TimelinePlacesSection","TimelineURI","TriggerablePageletLoader","URI","ViewportBounds","ge","getElementPosition","nullthrows","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){var i,j=6,k=2,l=!1;function m(a){return a.map(function(a){var c=a.controller,d=a.sk,e=a.label;a=a.title;return b("ProfileTabUtils").isMapTab(d)?new(b("TimelinePlacesSection"))(c,d,e,a):new(b("TimelineAppSection"))(c,d,e,a)})}function n(a){b("ScriptPath").set(b("ProfileNavigation").getScriptPath(a),null,{entity_id:b("TimelineController").getProfileID(),profile_session_id:b("TimelineController").getSessionToken()})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this,"timeline-medley")||this;f._transitionHandler=function(a){var c=a.getQueryData();if(Object.prototype.hasOwnProperty.call(c,"theater")){b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",function(){return b("PageTransitions").registerHandler(f._transitionHandler,j)});return!1}c=f._transitionHandlerImpl(a);c||f.reset();return c};f._sectionBreaker=e.breaker;m(c).forEach(f.appendSection,babelHelpers.assertThisInitialized(f));b("TimelineMonitor").monitorSection(babelHelpers.assertThisInitialized(f));e=b("nullthrows")(f.childSections.get(b("ProfileTabUtils").getIDForSectionKey(d)));f._lastLoadedSection=e.setIsLoaded(!0);b("ProfileOverviewSection").setActiveSectionID(f._lastLoadedSection.id);l&&f.isOverviewProfileTab()&&f.addSectionPlaceholders();c=(i||(i=b("URI"))).getNextURI();f._vanity=b("TimelineURI").getVanityFromURI(c);f._sk=b("TimelineURI").getTabKeyFromURI(c);b("PageTransitions").registerHandler(f._transitionHandler,j);f._monitorListener=b("Arbiter").subscribe(b("TimelineMonitor").SECTION_CHANGE,function(a,c){c.section instanceof b("TimelineAppSection")&&n(c.section._sk)});return f}var d=c.prototype;d.reset=function(){a.prototype.reset.call(this),b("MedleyPageletRequestData").reset(),b("PageTransitions").removeHandler(this._transitionHandler,j),b("ProfileOverviewSection").resetGlobalState(),this._monitorListener&&this._monitorListener.unsubscribe(),l=!1};d.addSectionTeasers=function(){this.isOverviewProfileTab()||(b("CSS").removeClass(this.getNode(),"_c4f"),this.thawChildren(),this.addSectionPlaceholders(),this.addSectionBreak())};d.addUpcomingSectionPlaceholders=function(a,b){b=b||k;while(a=a.getNext())if(!this.addSectionPlaceholder(a,a.getPrev())&&--b<=0)break};d.addSectionPlaceholder=function(a,c,d){if(!a.isLoaded()&&b("ge")(a.nodeID))return!1;if(!b("ge")(a.nodeID)){b("DOM").insertAfter(c.getNode(),a.getNode());a.createTriggerLoader(d);return!1}return!0};d.addSectionBreak=function(){var a=this.childSections.getHead();this._lastLoadedSection.getNext()&&a?b("DOM").insertAfter(a.getNode(),this._sectionBreaker):b("DOM").remove(this._sectionBreaker)};d.removeChildSection=function(a){this.childSections.remove(a),this.childSections.getCount()==1&&b("DOM").remove(this._sectionBreaker)};d.addSectionPlaceholders=function(){this.addUpcomingSectionPlaceholders(this._lastLoadedSection)};d.getNode=function(){return b("$")(this.id)};d.isOverviewProfileTab=function(){return b("ProfileTabUtils").isOverviewTab(this._sk)};d.toggleScrollLoad=function(a){l=a,a?(this.thawChildren(),this.addSectionPlaceholders()):this.freezeChildren()};d._transitionHandlerImpl=function(a){var c=this;if(b("TimelineURI").getVanityFromURI(a)!==this._vanity)return!1;var d=b("TimelineURI").getTabKeyFromURI(a);if(b("ProfileTabUtils").isTimelineTab(d)||b("ProfileTabUtils").isTimelineOverviewTab(d))return!1;if(b("ProfileTabUtils").isOverviewTab(d))return!1;else{var e=function(){var e=a.getQueryData();if(!e.next_cursor)return{v:!1};var f=c.childSections.getHead();while(f){if(f._sk===d){if(!f._activeCollection||!b("DOMQuery").scry(f._activeCollection.getNode(),"._3t3")[0])return{v:!1};b("Arbiter").inform("save_facebar_query",!0);window.setTimeout(function(){b("promiseDone")(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!f){a.next=3;break}a.next=3;return b("regeneratorRuntime").awrap(c._transitionToSection(f,e));case 3:case"end":return a.stop()}},null,this)}())},0);return{v:!0}}f=f.getNext()}}();if(typeof e==="object")return e.v}return!1};d._transitionToSection=function(a,c){var d,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d=b("getElementPosition")(a.getNode()).y-b("ViewportBounds").getTop();b("DOM").scry(a.getNode(),"._51k9").forEach(function(a){b("CSS").removeClass(a,"_51k9")});this._sk=a._sk;e=b("nullthrows")(a._activeCollection);b("ProfileOverviewSection").setActiveSectionID(a.id);a.thaw();b("CSS").addClass(this.getNode(),"_c4f");this.freezeChildren();f=b("DOMQuery").find(e.getNode(),"._3t3");h.next=11;return b("regeneratorRuntime").awrap(e.addContentLoader(f,c.next_cursor));case 11:e._contentLoader&&e._contentLoader.load({node:f,type:b("TriggerablePageletLoader").TRIGGER_NOW});g=this.childSections.getHead();while(g&&g.id!==a.id)g.remove(),g=this.childSections.getHead();b("ProfileOverviewSection").inform("Medley/transitionToSection",a.id);a.scrollTo(d<0?d:0);this._sk&&n(this._sk);b("PageTransitions").transitionComplete();case 18:case"end":return h.stop()}},null,this)};c.scrollToSection=function(a,c,d){b("ProfileOverviewSection").callWithSection(a,function(a){a.scrollTo(c,d)})};c.toggleScrollLoad=function(a){l=a,b("ProfileOverviewSection").callWithSection("timeline-medley",function(b){b.toggleScrollLoad(a)})};return c}(b("ProfileOverviewSection"));e.exports=a}),null);
__d("ProfileInfoHoverRow",["CurrentUser","Event","WebFunnelLogger","tidyEvent"],(function(a,b,c,d,e,f){a=function(a,c){b("tidyEvent")([b("Event").listen(a,"mouseenter",function(){new(b("WebFunnelLogger"))("ProfileBlueTimelineWebFunnelDefinition").setAction("[impression][about]["+c+"][edit button]").setSessionKey(b("CurrentUser").getID()).log()})])};e.exports=a}),null);